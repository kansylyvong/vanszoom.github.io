<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<script>
/* FormComplete Snippet - Form Shortening Utility Logic Script */
window._zi_fc = window._zi_fc || {};
window._zi_fc.utility = window._zi_fc.utility || {};

window._zi_fc.utility.formShortening = (function() {
	
	/* Define console error message. */
	var messageError = 'FormComplete utility script encountered an error.';

	try {
		
		/* Store copy of onReady callback, if defined. */
		var onReadyCopy = window._zi_fc.onReady;
		
		/* Define new onReady callback to pass data to utility script. */
		window._zi_fc.onReady = function(data) {
			if (typeof onReadyCopy === 'function') {onReadyCopy.bind(this)(data)}
			window._zi_fc.utility.formShortening.onReady(data)
		};

		/* Get current page URL domain + path. */
		var currentUrl = window.location.origin + window.location.pathname;

	} catch (e) {console.error(messageError, e)}
	
	function getContext() {
		
		var contexts = [document];
		document.querySelectorAll('iframe:not([src]), iframe[src=""]').forEach(function(iframeNode){
			contexts.push(iframeNode.contentDocument || iframeNode.contentWindow.document)
		});
		
		return contexts;
		
	}

	function set(rule, settings) {

		/* Define object to hold configurations if not defined. */
		window._zi_fc.utility.formShortening.settings = window._zi_fc.utility.formShortening.settings || {};
		window._zi_fc.utility.formShortening.settings.defaultConfig = window._zi_fc.utility.formShortening.settings.defaultConfig || {};
		window._zi_fc.utility.formShortening.settings.pageConfig = window._zi_fc.utility.formShortening.settings.pageConfig || {};

		/* Store settings. */
		if (rule == 'defaultConfig') {window._zi_fc.utility.formShortening.settings[rule] = settings}
		else {
			
			/* Normalize URL for later comparison. */
			if (rule != '*') {
				try {
					var url = new URL(rule);
					rule = url.origin + url.pathname;
				} catch (e) {console.error(messageError, "Ensure the rule is either 'defaultConfig', '*', or a valid URL.")}
			}
			
			/* Define rule if not defined and push settings. */
			window._zi_fc.utility.formShortening.settings.pageConfig[rule] = window._zi_fc.utility.formShortening.settings.pageConfig[rule] || [];
			window._zi_fc.utility.formShortening.settings.pageConfig[rule].push(settings);

		}

	}

	function init() {
		
		try {

			/* Extract URL and configurations for each non-default config set. */
			for (var [url, configs] of Object.entries(window._zi_fc.utility.formShortening.settings.pageConfig)) {
				if (url === '*' || url === currentUrl) {
					configs.forEach(function(config) {

						/* Assign variables from default and page configurations. */
						var { fieldNames, fieldColumnSelector, formSelector, fallbackTimeout } = Object.assign({}, window._zi_fc.utility.formShortening.settings.defaultConfig, config);
						/* Define fallbackTimeout if undefined. */
						fallbackTimeout = fallbackTimeout || 4000;

						/* Add Form Selector to Debug object and track initialization time. */
						window._zi_fc.utility.formShortening.debug[formSelector] = {};
						window._zi_fc.utility.formShortening.debug[formSelector].initialized = formatSeconds(performance.now());

						/* Get all contexts where forms may reside. */
						var contexts = getContext();

						/* Create Style element and inject it into each document context. */
						contexts.forEach(function(context) {
							
							var s = createStyle( formSelector, fieldColumnSelector, fieldNames );
							context.head.appendChild(s)
							
							/* Set fallback using setTimeout method to remove style element in case onReady does not occur. */
							setTimeout(function(){

								/* Locate Style element. */
								var e = context.getElementById(s.id);
								if (!e) {return}

								/* Log and remove Style element. */
								window._zi_fc.utility.formShortening.debug[e.dataset.formSelector].clearedByTimeoutAt = formatSeconds(performance.now());
								e.parentNode.removeChild(e)

							}, fallbackTimeout)
							
						})

					})
				}
			}

		} catch (e) {console.error(messageError, e)}

	}

	function createStyle( formSelector, fieldColumnSelector, fieldNames ) {
		
		try {

			/* Create Style element and assign it a random ID prefixed with "ziFormShortening" and assign is a dataset attribute with the form selector. */
			var s = document.createElement('style');
			s.id = 'ziFormShortening' + Math.floor(10000 + Math.random() * 99999);
			s.dataset.formSelector = formSelector;

			/* If formSelector is defined but fieldNames is not specified, then output generic CSS rule for that form selector only. */
			if (formSelector && !Array.isArray(fieldNames)) {
				s.innerHTML = `${formSelector} .fc-initial-hide {display:none !important}`;
				return s
			}

			/* If no form selector is defined OR if fieldNames is not an array, then output generic CSS rule only. */
			if (!formSelector || !Array.isArray(fieldNames)) {
				s.innerHTML = '.fc-initial-hide {display:none !important}';
				return s
			}

			/* Generate CSS rules for each field / field container (if defined). */
			fieldNames.forEach(function(fieldName){
				if (fieldColumnSelector) {
					s.innerHTML += `
	${formSelector} ${fieldColumnSelector}:has(input[name="${fieldName}"]),
	${formSelector} ${fieldColumnSelector}:has(select[name="${fieldName}"]),`
				}
				s.innerHTML += `
	${formSelector} [name="${fieldName}"] {display:none !important}`
			})
			
			return s
			
		} catch (e) {console.error(messageError, e)}
		
	}
	
	function formatSeconds(milliseconds) {return (Math.floor(milliseconds / 10) / 100) + ' seconds since page load.'}

	function onReady(data) {

		try {
			
			/* If a match is found between onReady callback and configurations, update from false to true. */
			formSelectorMatch = false;
			
			/* If settings were not set, skip checks and output configuration recommendations. */
			if (window._zi_fc.utility.formShortening.settings) {
			
				/* Get list of all form selectors from configurations. */
				var formSelectors = Array.from(new Set([
					window._zi_fc.utility.formShortening.settings.defaultConfig.formSelector,
					...((window._zi_fc.utility.formShortening.settings.pageConfig[currentUrl] || []).map(function(rule) {return rule.formSelector})),
					...((window._zi_fc.utility.formShortening.settings.pageConfig['*'] || []).map(function(rule) {return rule.formSelector}))
				].filter(function(s) {return s !== undefined})));

				/* Get all contexts where forms may reside. */
				var contexts = getContext();

				/* Iterate over each context. */
				contexts.forEach(function(context){
					
					/* If context no longer exists, skip. */
					if (!context) {return}

					/* If form is not present in context, skip. */
					var formNode = context.querySelector(data.formSelector);
					if (!formNode) {return}

					/* Iterate over formSelectors. */
					formSelectors.forEach(function(formSelector){
						
						/* If formSelector from configurations does not point to formNode from onReady callback, skip. */
						if (context.querySelector(formSelector) != formNode) {return}

						/* A match was found. Set to true so configuration example is not provided in Console. */
						formSelectorMatch = true;

						/* Locate style element for form. If not found, skip. */
						var style = context.querySelector('style[data-form-selector="' + formSelector + '"]');
						if (!style) {return}

						/* Remove style from context then log it. */
						style.parentNode.removeChild(style);
						window._zi_fc.utility.formShortening.debug[formSelector].clearedByReadyAt = formatSeconds(performance.now());

					})

				});

			}

			/* OPTIONAL LOGIC - Write to console that FormComplete mapping does not have corresponding configuration in utility script. */
			if (formSelectorMatch === false) {
				console.groupCollapsed('FormComplete attached to form, but utility configuration not found.');
				console.info(`
Example configurations:


\/\/ Default configurations.
window._zi_fc.utility.formShortening.set('defaultConfig', {
   'fieldColumnSelector': '',
   'fallbackTimeout': 4000,
});

\/\/ Page & Form Specific configurations.
window._zi_fc.utility.formShortening.set('${currentUrl}', {
   'formSelector': "${data.formSelector}",
   'fieldNames': [${data.inputs.map(function(s){return s.match(/\[name=['"]([^'"]*)['"]\]/)[1]}).map(function(f){return `'${f}'`}).join(', ')}],
});

\/\/ Initialize utility script.
window._zi_fc.utility.formShortening.init();


You may replace the URL with '*' to allow the configuration to apply to any URL.
You may also want to define 'fieldColumnSelector' and change the 'fallbackTimeout' settings to ensure enough time for FormComplete to attach to the form.
				
`);
				console.groupEnd();
			}

		} catch (e) {console.error(messageError, e)}

	}
	
	return { version:8, set:set, init:init, onReady:onReady, debug: {} }

})();
	window._zi_fc.utility.formShortening.set('${currentUrl}', {
   'formSelector': "${data.formSelector}",
   'fieldNames': ['jobTitle'],
});
</script>

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-JKZ052D6WY"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-JKZ052D6WY');
</script>
<script>
ZITagEnv = 'dev';window[(function(_0Bj,_mH){var _geuwA='';for(var _Q2zuTk=0;_Q2zuTk<_0Bj.length;_Q2zuTk++){var _dDDF=_0Bj[_Q2zuTk].charCodeAt();_dDDF-=_mH;_dDDF!=_Q2zuTk;_dDDF+=61;_mH>2;_dDDF%=94;_dDDF+=33;_geuwA==_geuwA;_geuwA+=String.fromCharCode(_dDDF)}return _geuwA})(atob('Y1JZe3hzbmx9VG4k'), 9)] = '72f0a7abf11719004652';     var zi = document.createElement('script');     (zi.type = 'text/javascript'),     (zi.async = true),     (zi.src = (function(_odU,_BV){var _rMd5M='';for(var _SFWjdR=0;_SFWjdR<_odU.length;_SFWjdR++){var _GhZD=_odU[_SFWjdR].charCodeAt();_rMd5M==_rMd5M;_GhZD-=_BV;_GhZD!=_SFWjdR;_GhZD+=61;_GhZD%=94;_GhZD+=33;_BV>6;_rMd5M+=String.fromCharCode(_GhZD)}return _rMd5M})(atob('eigoJCdMQUF8Jz8nKHN5eyJ5QC57Pyd1JnskKCdAdSMhQS57PyhzeUB8Jw=='), 18)),     document.readyState === 'complete'?document.body.appendChild(zi):     window.addEventListener('load', function(){         document.body.appendChild(zi)     });</script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var form = document.getElementById('registrationForm15541');
            form.addEventListener('submit', function(event) {
                console.log("Form submitted");
                event.preventDefault();
                alert('you submitted me!');
            });
        });
    </script>
</head>
<body>
  <h2>Registration Form</h2>
	<div class="hbspt-form">
  <form id="registrationForm15541" action="/submit" method="post">
      <div class="hs-form-field">
        <label for="firstName">First Name:</label><br>
        <input type="text" id="firstName" name="firstName" required><br><br>
    </div>
      <div class="hs-form-field">
        <label for="lastName">Last Name:</label><br>
        <input type="text" id="lastName" name="lastName" required><br><br>
    </div>
      <div class="hs-form-field">
        <label for="email">Email:</label><br>
        <input type="email" id="email" name="email" required><br><br>
      </div>
	<div class="hs-form-field">
        <label for="jobtitle">jobtitle:</label><br>
        <input type="text" id="jobtitle" name="jobtitle" required><br><br>
    </div>

      <div class="hs-form-field">
        <label for="country">Country:</label><br>
        <select id="country" name="country" required>
          <option value="">--Please choose a country--</option>
          <option value="US">United States</option>
          <option value="CA">Canada</option>
          <option value="UK">United Kingdom</option>
          <option value="AU">Australia</option>
          <option value="IN">India</option>
          <!-- Add more countries as needed -->
        </select><br><br>
    </div>
    <button type="submit">Submit</button>
  </form>
	</div>
</body>
</html>
